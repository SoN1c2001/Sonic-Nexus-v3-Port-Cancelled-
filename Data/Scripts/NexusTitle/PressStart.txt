//----------Sonic Nexus "Press Start Script-----------//
//----Scripted by Christian Whitehead "The Taxman"----//


sub ObjectMain //Welcome to switch case hell//
	switch Object.State
	case 0
		if KeyPress.Up==true
			if KeyDown.ButtonA==true
				Object.Value1=1
			endif
		endif
		if KeyPress.Down==true
			if KeyDown.ButtonA==true
				if Object.Value1==1
					Object.Value1=2
				else
					Object.Value1=0
				endif
			endif
		endif
		if KeyPress.Left==true
			if KeyDown.ButtonA==true
				if Object.Value1==2
					Object.Value1=3
				else
					Object.Value1=0
				endif
			endif
		endif
		if KeyPress.Right==true
			if KeyDown.ButtonA==true
				if Object.Value1==3
					Object.Value1=4
				else
					Object.Value1=0
				endif
			endif
		endif
		if KeyDown.ButtonA==true
			if KeyDown.Start==true
				if Object.Value1==4
					Object.State=3 //LSelect
					StopMusic()
					SetMusicTrack("StageSelect.ogg",0,1)
					PlaySfx(1,false)
				else
					Object.Value1=0
				endif
			endif
		else
			Object.Value1=0
		endif
#platform: Standard
		if KeyPress.Start==true
			if Object.Value1<4
				Object.State=1
			endif
#endplatform

#platform: Mobile
		CheckTouchRect(0,0,Screen.XSize,240)
		if CheckResult>-1
			Object.State=1
#endplatform
		end if
		break
	case 1
		Object.State=2
		PlayStageSfx(1,false)
		break
	case 2
		Music.Volume-=2
		Object.Value1+=4
		if Object.Value1==384
			Player.Lives=3
			Player.Score=0
			StopMusic()
#platform: Standard
			Stage.ListPos=0
#endplatform

#platform: Mobile
			Stage.ActiveList=1
			Stage.ListPos=0
#endplatform
			LoadStage()
		end if
		SetScreenFade(0,0,0,Object.Value1,0,255)
		break
	case 3
		LoadPalette("LSelect.act",0,0,0,255)
		PlayMusic(0)
		object.state=4
		object[5].value2=1
		break
	end switch
end sub

sub ObjectDraw
	Object.iXpos=Screen.CenterX
	Object.Value0++
	if Object.Value0>29
		Object.Value0=0
	end if
	if Object.State==0
		if Object.Value0>14
			DrawSprite(0)
			DrawSprite(1)
		endif
	end if
end sub

sub ObjectStartup
	LoadSpriteSheet("NexusTitle/Menu.gif")
	SpriteFrame(-46,-6,41,13,1,1)
	SpriteFrame(5,-6,41,13,1,15)
end sub

sub RSDK
	LoadSpriteSheet("NexusTitle/Menu.gif")
	SetEditorIcon(Icon1,0,-46,-6,41,13,1,1)
end sub